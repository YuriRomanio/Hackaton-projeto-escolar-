<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AcessCore - Perfil</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  <link rel="stylesheet" href="white.css">
  <style>
    :root {
      --bg-primary: #0d1117;
      --bg-secondary: #161b22;
      --border-color: #30363d;
      --text-primary: #c9d1d9;
      --text-secondary: #8b949e;
      --accent-color: #2f81f7;
      --danger-color: #da3633;
      --tag-green-text: #56d364;
      --tag-green-bg: rgba(56, 139, 60, .2);
      --tag-green-border: rgba(56, 139, 60, .4);
      --tag-blue-text: #58a6ff;
      --tag-blue-bg: rgba(47, 129, 247, .2);
      --tag-blue-border: rgba(47, 129, 247, .4)
    }
    *:focus { outline: none }
    body { margin: 0; font-family: 'Poppins', sans-serif; background: var(--bg-primary); color: var(--text-primary); display: flex; height: 100vh; overflow: hidden }
    .sidebar { width: 240px; background: var(--bg-secondary); padding: 25px 0; display: flex; flex-direction: column; border-right: 1px solid var(--border-color); transition: transform .3s ease-in-out; z-index: 1000 }
    .sidebar-header { padding: 0 25px; margin-bottom: 30px; display: flex; align-items: center }
    .sidebar-header i { font-size: 32px; color: var(--accent-color); margin-right: 10px }
    .sidebar-header h2 { margin: 0; font-size: 24px; color: var(--text-primary) }
    .sidebar-nav a { display: flex; align-items: center; padding: 15px 25px; color: var(--text-secondary); text-decoration: none; transition: .2s ease-in-out; border-left: 3px solid transparent }
    .sidebar-nav a:hover, .sidebar-nav a.active { background: var(--bg-primary); color: #fff; border-left: 3px solid var(--accent-color) }
    .sidebar-nav a i { width: 20px; margin-right: 15px; text-align: center }
    .sidebar-nav .logout { margin-top: auto }

    /* --- ÁREA PRINCIPAL --- */
    .main { flex: 1; padding: 30px; overflow-y: auto; display: flex; flex-direction: column; }
    .header { display: flex; align-items: center; gap: 20px; margin-bottom: 20px; flex-shrink: 0; }
    .header-text h1 { margin: 0; font-size: 28px }
    .header-text p { margin: 5px 0 0 0; color: var(--text-secondary) }
    .profile-header { background: var(--bg-secondary); padding: 20px; border-radius: 8px; display: flex; align-items: center; justify-content: space-between; border: 1px solid var(--border-color); margin-bottom: 20px; flex-shrink: 0; }
    
    /* --- GRADE DOS CARDS --- */
.master-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  grid-template-rows: auto 1fr 1fr auto; /* <-- ESTA É A LINHA QUE CORRIGE TUDO */
  gap: 20px;
  flex: 1;
  min-height: 0;
}
    
    /* --- CARD (CONTENÇÃO) --- */
    .card { background: var(--bg-secondary); border-radius: 8px; border: 1px solid var(--border-color); display: flex; flex-direction: column; overflow: hidden; }
    .card-header { display: flex; justify-content: space-between; align-items: center; padding: 20px; border-bottom: 1px solid var(--border-color); flex-shrink: 0; }
    .card-content { padding: 20px; flex-grow: 1; display: flex; flex-direction: column; min-height: 0; }
    
    /* --- CHAT (ELEMENTOS INTERNOS) --- */
    .chat-messages { flex: 1; overflow-y: auto; display: flex; flex-direction: column; gap: 15px; padding-right: 10px; }
    .chat-input { display: flex; gap: 10px; padding: 15px 0 0 0; border-top: 1px solid var(--border-color); flex-shrink: 0; }
    .chat-input input { flex: 1; background: var(--bg-primary); border: 1px solid var(--border-color); border-radius: 6px; padding: 10px; color: var(--text-primary) }
    .chat-input button { border: none; background: var(--accent-color); color: #fff; border-radius: 6px; padding: 0 15px; cursor: pointer }
    .message { display: flex; gap: 10px; max-width: 80% }
    .message img { width: 35px; height: 35px; border-radius: 50% }
    .message-content { padding: 10px 15px; border-radius: 18px }
    .message.sent { align-self: flex-end }
    .message.sent .message-content { background: var(--accent-color); color: #fff }
    .message.received { align-self: flex-start }
    .message.received .message-content { background: var(--border-color); color: var(--text-primary) }
    
    /* --- RESTANTE DO CSS --- */
    .user-details { display: flex; align-items: center; gap: 20px }
    .user-info { display: flex; flex-direction: column; gap: 8px }
    .user-info .top-row { display: flex; align-items: center; gap: 12px }
    .user-info .username { font-size: 20px; font-weight: 600 }
    .user-tags { display: flex; gap: 8px }
    .user-tags .tag { font-size: 12px; padding: 4px 12px; border-radius: 16px; font-weight: 500; white-space: nowrap; border: 1px solid transparent }
    .tag.member { background-color: var(--tag-green-bg); color: var(--tag-green-text); border-color: var(--tag-green-border) }
    .tag.private { background-color: var(--tag-blue-bg); color: var(--tag-blue-text); border-color: var(--tag-blue-border) }
    .user-stats { font-size: 14px; color: var(--text-secondary) }
    .user-stats span { margin-right: 20px }
    .card:hover { transform: translateY(-5px); box-shadow: 0 8px 20px rgba(0, 0, 0, .3) }
    .card-header-title { display: flex; align-items: center; gap: 15px }
    .card-header-title i { font-size: 20px; color: var(--accent-color) }
    .card-header-title h2 { font-size: 18px; margin: 0; font-weight: 500 }
    .grid-col-span-2 { grid-column: span 2 }
    .grid-row-span-2 { grid-row: span 2 }
    .btn-icon { background: var(--accent-color); color: #fff; border: none; width: 30px; height: 30px; border-radius: 6px; cursor: pointer; font-size: 16px }
    .setting-row { display: flex; justify-content: space-between; align-items: center }
    .setting-row:not(:last-child) { margin-bottom: 20px }
    .switch { position: relative; display: inline-block; width: 44px; height: 24px }
    .switch input { display: none }
    .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #333; transition: .4s; border-radius: 24px }
    .slider:before { position: absolute; content: ""; height: 18px; width: 18px; left: 3px; bottom: 3px; background-color: #fff; transition: .4s; border-radius: 50% }
    .switch input:checked+.slider { background-color: var(--accent-color) }
    .switch input:checked+.slider:before { transform: translateX(20px) }
    .empty-state { text-align: center; color: var(--text-secondary); margin: auto; }
    .empty-state i { font-size: 32px; opacity: .5; margin-bottom: 15px }
    .empty-state p { margin: 0; font-size: 14px }
    .avatar-upload { position: relative; width: 60px; height: 60px; flex-shrink: 0 }
    .avatar-preview { width: 100%; height: 100%; border-radius: 50%; background-color: var(--border-color); border: 2px solid var(--accent-color); display: flex; align-items: center; justify-content: center; overflow: hidden; background-size: cover; background-position: center }
    .avatar-preview i { font-size: 30px; color: var(--text-secondary) }
    .avatar-edit { position: absolute; bottom: -5px; right: -5px }
    .avatar-edit label { display: flex; align-items: center; justify-content: center; width: 30px; height: 30px; background: var(--accent-color); border-radius: 50%; color: white; cursor: pointer; border: 2px solid var(--bg-secondary); font-size: 16px }
    .friend-search-input { width: 100%; padding: 10px; background: var(--bg-primary); border: 1px solid var(--border-color); border-radius: 6px; color: var(--text-primary); margin-bottom: 15px }
    .friend-list { list-style: none; padding: 0; margin: 0; max-height: 200px; overflow-y: auto; padding-right: 10px }
    .friend-list li { display: flex; align-items: center; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid var(--border-color) }
    .friend-list li:last-child { border-bottom: none }
    .friend-info { display: flex; align-items: center; gap: 10px; cursor: pointer }
    .friend-info img { width: 40px; height: 40px; border-radius: 50% }
    .btn-add-friend { background: var(--accent-color); color: #fff; border: none; padding: 6px 12px; border-radius: 6px; cursor: pointer; font-size: 12px; white-space: nowrap; transition: background-color .2s }
    .btn-add-friend.secondary { background: var(--border-color); color: var(--text-secondary) }
    .btn-add-friend:disabled { background: var(--border-color); color: var(--text-secondary); cursor: not-allowed }
    .achievements-grid { display: flex; flex-wrap: wrap; gap: 15px; justify-content: center }
    .achievement-badge { position: relative; width: 60px; height: 60px; background: var(--border-color); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 24px; color: var(--accent-color) }
    .achievement-badge.locked { filter: grayscale(100%); opacity: .5 }
    .achievement-badge .tooltip { visibility: hidden; opacity: 0; background-color: var(--bg-primary); color: var(--text-primary); text-align: center; border-radius: 6px; padding: 8px 12px; position: absolute; z-index: 10; bottom: 120%; left: 50%; transform: translateX(-50%); font-size: 13px; font-weight: 500; white-space: nowrap; border: 1px solid var(--border-color); transition: opacity .2s, transform .2s; pointer-events: none }
    .achievement-badge .tooltip::after { content: ""; position: absolute; top: 100%; left: 50%; margin-left: -5px; border-width: 5px; border-style: solid; border-color: var(--bg-primary) transparent transparent transparent }
    .achievement-badge:hover .tooltip { visibility: visible; opacity: 1; transform: translateX(-50%) translateY(-5px) }
    .menu-toggle{display:none;background:0 0;border:1px solid var(--border-color);color:var(--text-primary);padding:8px 12px;border-radius:6px;cursor:pointer;font-size:20px}
    .modal-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.7);display:flex;justify-content:center;align-items:center;z-index:2000;opacity:0;visibility:hidden;transition:opacity .2s,visibility .2s}.modal-overlay:not(.hidden){opacity:1;visibility:visible}.modal-content{background:var(--bg-secondary);padding:30px;border-radius:12px;border:1px solid var(--border-color);width:90%;max-width:400px;text-align:left;transform:scale(.95);transition:transform .2s}.modal-overlay:not(.hidden) .modal-content{transform:scale(1)}.modal-content h3{margin:0 0 10px 0;font-size:20px;font-weight:600}.modal-content p{margin:0 0 25px 0;color:var(--text-secondary)}.modal-buttons{display:flex;justify-content:flex-end;gap:15px}.modal-buttons button{padding:10px 20px;border:none;border-radius:6px;font-weight:500;font-size:14px;cursor:pointer;transition:background-color .2s,opacity .2s}.modal-buttons .btn-secondary{background-color:transparent;border:1px solid var(--border-color);color:var(--text-primary)}.modal-buttons .btn-secondary:hover{background-color:var(--border-color)}.modal-buttons .btn-danger{background:var(--danger-color);color:#fff}.modal-buttons .btn-danger:hover{opacity:.85}.hidden{display:none}
    @media (max-width:1200px) { .master-grid { grid-template-columns: repeat(2, 1fr) } }
    @media (max-width:768px) { body { overflow-y: auto } .sidebar { position: fixed; height: 100%; transform: translateX(-100%) } .sidebar.open { transform: translateX(0) } .main { width: 100%; padding: 15px; box-sizing: border-box } .header-text h1 { font-size: 24px } .menu-toggle { display: block } .profile-header { flex-direction: column; align-items: flex-start; gap: 15px } .user-details { flex-direction: column; align-items: flex-start; gap: 10px; width: 100% } .user-stats span { display: block; margin-bottom: 5px } .master-grid { grid-template-columns: 1fr } }
  </style>
</head>
<body>
    <script>
        const token = localStorage.getItem('supabase_session');

        // Se o token não for encontrado, redireciona imediatamente para a página de login
        if (!token) {
            alert("Acesso negado. Faça login para continuar.");
            // Altere 'index.html' se a sua página de login tiver outro nome
            window.location.href = "index.html"; 
        }
        
        // Se o token existir, o script continua e o usuário vê o conteúdo da página.
    </script>
  <div id="overlay" class="overlay"></div>
  <div id="sidebar" class="sidebar">
    <div class="sidebar-header"><i class="fas fa-rocket"></i><h2>AcessCore</h2></div>
   <nav class="sidebar-nav">
    <a href="site.html"><i class="fas fa-tachometer-alt"></i> Início</a>
    <a href="perfil.html"><i class="fas fa-user"></i> Perfil</a>
    <a href="cursos.html"><i class="fas fa-book"></i> Cursos</a>
    <a href="compras.html"><i class="fas fa-shopping-cart"></i> Compras</a>
    <a href="configuracoes.html"><i class="fas fa-cog"></i> Configurações</a>
    <a href="index.html" class="logout"><i class="fas fa-sign-out-alt"></i> Sair</a>
</nav>
  </div>
  <div class="main">
    <div class="header">
      <button id="menu-toggle" class="menu-toggle"><i class="fas fa-bars"></i></button>
      <div class="header-text"><h1>Perfil de admin</h1><p>Aqui você encontra todas as informações da sua conta.</p></div>
    </div>
    <div class="profile-header">
      <div class="user-details">
          <div class="avatar-upload"><div id="avatar-preview" class="avatar-preview"><i class="fas fa-user"></i></div><div class="avatar-edit"><input type="file" id="image-upload" accept=".png, .jpg, .jpeg" style="display: none;"><label for="image-upload">+</label></div></div>
          <div class="user-info">
              <div class="top-row"><span class="username">admin</span><div class="user-tags"><span id="privacy-tag" class="tag private">Perfil Privado</span></div></div>
              <div class="user-stats"><span><b>0</b> Inscrições</span><span><b>0</b> Visualizações</span><span><b>0</b> Amigos</span></div>
          </div>
      </div>
    </div>
    <div class="master-grid">
      <div class="card"><div class="card-header"><div class="card-header-title"><i class="fas fa-star"></i><h2>Assinaturas</h2></div><button class="btn-icon">+</button></div><div class="card-content"><div class="empty-state"><i class="fas fa-folder-open"></i><p>Nenhuma assinatura ativa.</p></div></div></div>
      <div class="card"><div class="card-header"><div class="card-header-title"><i class="fas fa-cogs"></i><h2>Configurações</h2></div></div><div class="card-content" style="justify-content: flex-start;"><div class="setting-row"><span>Usar avatar do Discord</span><label class="switch"><input type="checkbox"><span class="slider"></span></label></div><div class="setting-row"><span>Perfil Público</span><label class="switch"><input type="checkbox" id="public-profile-toggle" checked><span class="slider"></span></label></div></div></div>
      <div class="card"><div class="card-header"><div class="card-header-title"><i class="fas fa-history"></i><h2>Atividades Recentes</h2></div></div><div class="card-content"><div class="empty-state"><i class="fas fa-clock"></i><p>Nenhuma atividade recente.</p></div></div></div>
      <div class="card grid-row-span-2">
        <div class="card-header"><div class="card-header-title"><i class="fas fa-user-plus"></i><h2>Encontrar Amigos</h2></div></div>
        <div class="card-content">
          <input type="text" id="friend-search-input" class="friend-search-input" placeholder="Pesquisar usuários...">
          <ul class="friend-list" id="friend-list"></ul>
        </div>
      </div>
      <div class="card grid-col-span-2 grid-row-span-2">
        <div class="card-header"><div class="card-header-title"><i class="fas fa-comments"></i><h2 id="chat-header">Chat</h2></div></div>
        <div class="card-content">
          <div class="chat-messages" id="chat-messages">
            <div class="message received"><img src="https://i.pravatar.cc/150?u=a" alt="avatar"><div class="message-content"><p>Olá! Tudo bem? Vi que estamos fazendo o mesmo curso.</p></div></div>
            <div class="message sent"><div class="message-content"><p>Oi! Tudo sim. Que legal! Estou gostando muito das aulas de LIBRAS.</p></div></div>
          </div>
          <div class="chat-input"><input type="text" id="chat-message-input" placeholder="Digite sua mensagem..."><button id="send-chat-btn"><i class="fas fa-paper-plane"></i></button></div>
        </div>
      </div>
      <div class="card"><div class="card-header"><div class="card-header-title"><i class="fas fa-cloud"></i><h2>Configuração na Nuvem</h2></div></div><div class="card-content"><div class="empty-state"><i class="fas fa-cloud-arrow-up"></i><p>Nenhuma configuração salva.</p></div></div></div>
      <div class="card grid-col-span-2">
        <div class="card-header"><div class="card-header-title"><i class="fas fa-trophy"></i><h2>Minhas Conquistas</h2></div></div>
        <div class="card-content">
            <div class="achievements-grid">
                <div class="achievement-badge"><i class="fas fa-book-reader"></i><span class="tooltip">Pioneiro do Saber</span></div>
                <div class="achievement-badge"><i class="fas fa-graduation-cap"></i><span class="tooltip">Mãos que Falam</span></div>
                <div class="achievement-badge"><i class="fas fa-fire"></i><span class="tooltip">Sempre Presente</span></div>
                <div class="achievement-badge locked"><i class="fas fa-star"></i><span class="tooltip">Aluno Destaque</span></div>
                <div class="achievement-badge locked"><i class="fas fa-users"></i><span class="tooltip">Embaixador</span></div>
            </div>
        </div>
      </div>
    </div>
  </div>
  <div id="confirm-logout-modal" class="modal-overlay hidden">
    <div class="modal-content"><h3>Deseja Realmente Sair?</h3><p>Você será redirecionado para a tela de login.</p><div class="modal-buttons"><button id="cancel-logout-btn" class="btn-secondary">Cancelar</button><button id="confirm-logout-btn" class="btn-danger">Sair</button></div></div>
  </div>
  <div vw class="enabled"><div vw-access-button class="active"></div><div vw-plugin-wrapper><div class="vw-plugin-top-wrapper"></div></div></div>
  <script src="https://vlibras.gov.br/app/vlibras-plugin.js"></script>
  <script>new window.VLibras.Widget('https://vlibras.gov.br/app');</script>
  <script>
    const menuToggle=document.getElementById("menu-toggle"),sidebar=document.getElementById("sidebar"),overlay=document.getElementById("overlay");
    menuToggle.addEventListener("click",()=>{sidebar.classList.toggle("open"),overlay.classList.toggle("active")});
    overlay.addEventListener("click",()=>{sidebar.classList.remove("open"),overlay.classList.remove("active")});
    const imageUpload=document.getElementById("image-upload"),avatarPreview=document.getElementById("avatar-preview");
    imageUpload.addEventListener("change",function(){const e=this.files[0];e&&(()=>{const o=new FileReader;o.onload=function(e){avatarPreview.innerHTML="",avatarPreview.style.backgroundImage=`url('${e.target.result}')`},o.readAsDataURL(e)})()});
    const logoutLink=document.querySelector("a.logout"),logoutModal=document.getElementById("confirm-logout-modal"),cancelLogoutBtn=document.getElementById("cancel-logout-btn"),confirmLogoutBtn=document.getElementById("confirm-logout-btn");
    logoutLink.addEventListener("click",function(e){e.preventDefault(),logoutModal.classList.remove("hidden")}),cancelLogoutBtn.addEventListener("click",()=>logoutModal.classList.add("hidden")),confirmLogoutBtn.addEventListener("click",()=>window.location.href=logoutLink.href),logoutModal.addEventListener("click",e=>e.target===logoutModal&&logoutModal.classList.add("hidden"));
    const privacyToggle=document.getElementById("public-profile-toggle"),privacyTag=document.getElementById("privacy-tag");
    function updatePrivacyTag(){privacyToggle.checked?privacyTag.textContent="Perfil Público":privacyTag.textContent="Perfil Privado"}
    privacyToggle.addEventListener("change",updatePrivacyTag);
    document.addEventListener("DOMContentLoaded",()=>{updatePrivacyTag();
        const friendSearchInput=document.getElementById("friend-search-input"),friendListEl=document.getElementById("friend-list"),chatHeader=document.getElementById("chat-header"),chatMessages=document.getElementById("chat-messages"),chatMessageInput=document.getElementById("chat-message-input"),sendChatBtn=document.getElementById("send-chat-btn");
        let friends=[{id:1,name:"Maria Silva",avatar:"https://i.pravatar.cc/150?u=a",status:"none"},{id:2,name:"João Costa",avatar:"https://i.pravatar.cc/150?u=b",status:"pending"},{id:3,name:"Ana Pereira",avatar:"https://i.pravatar.cc/150?u=c",status:"friend"},{id:4,name:"Lucas Souza",avatar:"https://i.pravatar.cc/150?u=d",status:"none"},{id:5,name:"Beatriz Lima",avatar:"https://i.pravatar.cc/150?u=e",status:"none"}];
        function renderFriendList(){friendListEl.innerHTML="";const e=friendSearchInput.value.toLowerCase();friends.filter(t=>t.name.toLowerCase().includes(e)).forEach(e=>{const t=document.createElement("li");let o="";"none"===e.status?o=`<button class="btn-add-friend" data-id="${e.id}">Adicionar</button>`:"pending"===e.status?o=`<button class="btn-add-friend secondary" data-id="${e.id}">Cancelar</button>`:o=`<button class="btn-add-friend" disabled>Amigo</button>`,t.innerHTML=`<div class="friend-info" data-id="${e.id}" data-name="${e.name}"><img src="${e.avatar}" alt="avatar"><span>${e.name}</span></div>${o}`,friendListEl.appendChild(t)})}
        friendListEl.addEventListener("click",function(e){const t=e.target.closest(".btn-add-friend"),o=e.target.closest(".friend-info");if(t&&!t.disabled){const e=parseInt(t.dataset.id,10),o=friends.find(t=>t.id===e);o&&("none"===o.status?o.status="pending":"pending"===o.status&&(o.status="none"),renderFriendList())}else o&&(chatHeader.textContent=`Chat com ${o.dataset.name}`)}),friendSearchInput.addEventListener("input",renderFriendList);
        function sendMessage(){const e=chatMessageInput.value.trim();if(""===e)return;const t=document.createElement("div");t.classList.add("message","sent"),t.innerHTML=`<div class="message-content"><p>${e}</p></div>`,chatMessages.appendChild(t),chatMessageInput.value="",chatMessages.scrollTop=chatMessages.scrollHeight}
        sendChatBtn.addEventListener("click",sendMessage),chatMessageInput.addEventListener("keydown",e=>{"Enter"===e.key&&sendMessage()}),renderFriendList()});
  </script>
  <script src="tema.js"></script>
</body>
</html>
